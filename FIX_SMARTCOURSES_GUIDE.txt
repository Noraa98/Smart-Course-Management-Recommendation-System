STEPS TO FIX SMARTCOURSES - COURSES NOT APPEARING
================================================

## PROBLEM: Buttons not clickable, courses not showing

This usually means:
1. No courses in database
2. Categories not seeded
3. Database migrations not applied
4. Seeding failed silently

## SOLUTION (Run in order):

### STEP 1: Delete the Database (SQL Server)
Open SQL Server Management Studio and run:
```sql
USE master;
ALTER DATABASE SmartCourses SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
DROP DATABASE SmartCourses;
```

### STEP 2: Delete Migrations (keep only initial)
In Package Manager Console:
```powershell
# Go to SmartCourses.DAL project
cd SmartCourses.DAL

# Remove all migrations except the first one
Get-ChildItem Migrations -Filter "*.cs" -Exclude "*initial*" | Remove-Item

# Or manually delete migration files from: SmartCourses.DAL\Persistence\Data\Migrations\
# Keep only: 20251122213725_initialCreate.cs and DbContextModelSnapshot.cs
```

### STEP 3: Create Fresh Migration
```powershell
cd SmartCourses.DAL
dotnet ef migrations add Initial --startup-project ..\SmartCourses.PL
```

### STEP 4: Update Database
```powershell
dotnet ef database update --startup-project ..\SmartCourses.PL
```

### STEP 5: Verify Seeding
- Run the application
- Check console logs for: "Successfully seeded X courses"
- Check SQL Server: 
  - Table AspNetUsers should have 5 records
  - Table Categories should have 6 records  
  - Table Courses should have 10 records

### STEP 6: Navigate to Admin Dashboard
- URL: https://localhost:7xxx/Admin/Dashboard
- Login as admin@smartcourses.com / Password@123
- Click "Manage Courses"
- Should see the 10 courses with working buttons

## IF STILL NOT WORKING:

### Check Routing:
- Verify Program.cs has area routing before default routing
- Areas route should be: {area:exists}/{controller=Dashboard}/{action=Index}/{id?}

### Check Admin/Courses/Index.cshtml:
- Verify asp-area="Admin" is on all buttons
- Verify asp-controller="Courses" (plural, not Course)
- Verify asp-action values: Details, Edit, Create, Delete

### Check CoursesController:
- File: SmartCourses.PL\Controllers\AdminArea\CoursesController.cs
- Verify [Area("Admin")] attribute
- Verify [Authorize(Roles = "Admin")] attribute
- Verify Create, Edit, Details, Delete actions exist

## QUICK DIAGNOSTICS:

### Check what's in database:
```sql
SELECT COUNT(*) FROM AspNetUsers;
SELECT COUNT(*) FROM Categories;
SELECT COUNT(*) FROM Courses;
SELECT * FROM AspNetUsers WHERE Email LIKE '%instructor%';
```

### Check console for errors:
- Look at Visual Studio debug output
- Check logs folder: SmartCourses.PL\logs\

### If courses are NULL:
- Courses.json might not be loaded
- Check that courses.json is copied to output: CopyToOutputDirectory=PreserveNewest
- In SmartCourses.DAL.csproj verify:
  ```xml
  <None Update="Persistence\Data\Seeds\*.json">
    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
  </None>
  ```

### If InstructorId mismatch:
- courses.json has InstructorId: 1 and 2 (indices, not actual GUIDs)
- DbInitializer maps them to actual instructor IDs
- Check DbInitializer.SeedCourses() method for this mapping

=================================================
